var Directives;(function(n){var t=function(){function t(){}return t.MakeSvg=function(n,t){var r=document.createElementNS("http://www.w3.org/2000/svg",n),i;for(i in t)r.setAttribute(i,t[i]);return r},t.Factory=function(i,r){var e,u,f;return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><rect x="0" y="0" width="'+Constants.Display.CanvasXMax+'" height="'+Constants.Display.CanvasYMax+'" style="fill:white;"/><\/svg>',scope:{},link:function(o,s){var s=angular.element(s),h,a,c,v,y,w=$(s).get(0).childNodes[0],p,l;for(i.log("Initializing the display..."),e=angular.copy(r.pixels),u=[],p=new n.Palette,f=p.getPalette(),i.log("Palette has been generated."),c=0;c<Constants.Display.YMax;c+=1)for(h=0;h<Constants.Display.XMax;h+=1)y=c*Constants.Display.XMax+h,a=h*Constants.Display.XFactor,v=c*Constants.Display.YFactor,l=t.MakeSvg("rect",{x:a,y:v,width:Constants.Display.XFactor,height:Constants.Display.YFactor}),l.setAttribute("style","fill:"+f[0]),u[y]=l,w.appendChild(l);i.log("Built pixel map."),r.callback=function(n,t){var i=n&Constants.Display.Max,r=t&Constants.Memory.ByteMask;e[i]=r,u[i].removeAttribute("style"),u[i].setAttribute("style","fill:"+f[r])},i.log("Display initialized.")}}},t}();n.Display=t,Main.App.Directives.directive("display",["consoleService","displayService",t.Factory])})(Directives||(Directives={}))